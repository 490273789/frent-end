### 进制

比如十进制，满十进 1 位 25 2 _ 10 ^ 1 + 5 _ 10 ^ 0
二进制满 2 进一位 00101 1 _ 2 ^ 2 + 1 _ 2 ^ 0
0o 八进制满 8 进一位 567 5 _ 8 ^ 2 + 6 _ 8 ^ 1 + 7 \* 8 ^ 0
0x 十六进制满 16 进一位

二进制：bit - binary digit
8 bit = 1byte 00000000
1024byte = 1kb
1024KB = 1M

加法
进位：与运算
加法位：异或运算

## 规律

- 2ⁿ 转二进制 1后面跟n个零
- 2ⁿ + ... + 2º = 2ⁿ + ¹ - 1
  - 原理： 011111111 = 10000000 - 1

## 位运算符

- 按位与 & : 都为1，结果为1
  - 应用
  - 判断权限位
  - 高效模运算：k % 2ⁿ = k & (2ⁿ - 1) -> k % 64 = k & 63
    - 43 101011
    - 16 10000
    - 11 1011
- 按位或 |: 有一个为1，结果为1
  - 应用
  - 添加权限位
- 按位异或 ^: 不一样为1
  - 应用
  - 交换两个数
  - 两个相同的数异或等于0
  - 一个数异或0等于本身
  - 删除权限位
- 按位取反 ~: 0变1，1变0
  - 应用
  - 取相反数：~0 = -1, ~-1 = 0
- 左移 <<

  - 应用：
  - 高效的乘法运算：将x左移 n位，相当于x ✖️ 2ⁿ，比如将2左移3位，2 ✖️ 2³ = 2 ✖️ 8 = 16

- 右移 >>
  - 应用：
  - 高效的出发运算：将x右移n位，相当于 x ÷ 2ⁿ

## 判断x是否为 2的n次方

(2ⁿ & 2ⁿ - 1) = 0

- 2ⁿ 的二进制永远都是 1 + n个零
- 2ⁿ - 1的二进制永远都是 0 + n个1

## 交换两个变量的值

```
let a = 1
let b = 2

a = a ^ b
b = a ^ b // a ^ b ^ b
a = a ^ b // a ^ b ^ a

```

## 二进制实现 加减乘除

- 拆二进制
- 46 = 32 + 14(8 + 6(4 + 2)) = 32 + 8 + 4 + 2
  - 100000 | 1000 + 100 | 10
  - 101110

### 加法运算

```javascript
// a + b = (a ^ b) + ((a & b) << 1)
// 步骤1：  a ^ b
// 步骤2： (a & b) << 1
// 无限循环 步骤1和步骤2，直到步骤二为0，此时步骤1即为答案
const add = (a, b) => {
  let sum = a;
  while (b !== 0) {
    sum = a ^ b; // 无进位相加
    b = (a & b) << 1; // 相加的进位信息
    a = sum;
  }
  return sum;
};
console.log(add(28, 2));
```

- 20 = 16 + 4
  - 10000 | 100
  - 10100
- 异或运算就是无进位相加
  - 0110110
  - 1110111
  - 1000001
  - 1 + 1 忽略进位取0，0 + 1 = 1， 0 + 0 = 0 所以是不相等的为零
- 下面的运算是获得相加进位信息
  - a & b << 1

### 减法运算

- 减法运算的本质是a加上 b的相反数加1: a + (~b + 1)

```javascript
const add = (a, b) => {
  let sum = a;
  while (b !== 0) {
    sum = a ^ b; // 无进位相加
    b = (a & b) << 1; // 相加的进位信息
    a = sum;
  }
  return sum;
};

const negNum = (num) => {
  return add(~num, 1);
};

console.log(add(14, negNum(28)));
```

### 乘法运算

- a ✖️ b 用b的二进制中的每一位 & a, 最后相加

```javascript
//  a 0111
//* b 1010
//    0000
//   01110
//  000000
// 0111000
// 相加 01110 + 0111000
const add = (a, b) => {
  let sum = a;
  while (b !== 0) {
    sum = a ^ b; // 无进位相加
    b = (a & b) << 1; // 相加的进位信息
    a = sum;
  }
  return sum;
};

const multiply = (a, b) => {
  // 判断b 不是0
  let result = 0;
  while (b !== 0) {
    // 判断b的最后一位是否为0
    if ((b & 1) !== 0) result = add(result, a);
    // 后面补零
    a <<= 1;
    // 移除最后一位
    b >>>= 1;
  }
  return result;
};

console.log(multiply(20, 11));
```

### 减法运算

-
